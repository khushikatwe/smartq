<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>SmartQ — User</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Inter,system-ui;}
body{
  background:linear-gradient(135deg,#dfe9f3,#ffffff);
  height:100vh;display:flex;justify-content:center;align-items:center;
}
.card{
  background:rgba(255,255,255,0.7);
  padding:40px 50px;
  border-radius:20px;
  backdrop-filter:blur(12px);
  box-shadow:0 10px 30px rgba(0,0,0,0.1);
  text-align:center;
  width:350px;
  animation:fadeIn 0.8s ease;
}
@keyframes fadeIn{0%{opacity:0;transform:translateY(20px);}100%{opacity:1;transform:translateY(0);}}
h1{font-size:26px;margin-bottom:20px;font-weight:700;color:#222;}
.button{
  background:#3478f7;color:white;
  padding:12px 22px;border:none;border-radius:10px;
  font-size:16px;font-weight:600;cursor:pointer;
  transition:0.25s;box-shadow:0 4px 10px rgba(0,0,0,0.1);
}
.button:hover{transform:scale(1.05);background:#1f62db;}
.label{margin-top:20px;font-size:15px;color:#444;}
.token{
  font-size:48px;font-weight:800;margin:10px;color:#111;
}
.footer{
  margin-top:15px;font-size:13px;color:#666;
}
</style>
</head>
<body>

<div class="card">
  <h1>SmartQ — User</h1>
  <button class="button" onclick="takeToken()">Take Token</button>

  <div class="label">Your Token:</div>
  <div class="token" id="yourToken">—</div>

  <div class="footer" id="info"></div>
</div>

<script>
function read(k, d){ return JSON.parse(localStorage.getItem(k) || JSON.stringify(d)); }
function write(k, v){ localStorage.setItem(k, JSON.stringify(v)); }

function takeToken(){
  let last = read("lastToken", 0) + 1;
  write("lastToken", last);
  show(last);
}

function show(t){
  document.getElementById("yourToken").innerText = t;
}

function updateInfo(){
  let last = read("lastToken", 0);
  let current = read("currentToken", 0);
  document.getElementById("info").innerText = `Last issued: ${last} • Now serving: ${current}`;
}

window.onload = () => {
  updateInfo();
  let saved = read("recentToken", null);
  if(saved) show(saved);
};
setInterval(updateInfo, 800);
</script>

</body>
</html>
